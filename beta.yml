      containers:
        - name: main
          image: ubuntu:latest
          command: ["sh", "-c", "tail -f /dev/null"]
          resources:
            limits:
              memory: "32Mi"
          volumeMounts:
            - name: log
              mountPath: /mnt/log
        - name: probe-test
          image: busybox
          command: ["sh", "-c", "while true; do if [ -f /tmp/fail ]; then exit 1; fi; sleep 2; done"]
          readinessProbe:
            exec:
              command:
                - cat
                - /mnt/log/init.txt
            initialDelaySeconds: 2
            periodSeconds: 5
          livenessProbe:
            exec:
              command:
                - sh
                - -c
                - "[ ! -f /tmp/fail ]"
            initialDelaySeconds: 2
            periodSeconds: 5
      initContainers:
        - name: init
          image: busybox
          command:
            - sh
            - -c
            - "echo Init beta at $(date) > /mnt/log/init.txt"
          volumeMounts:
            - name: log
              mountPath: /mnt/log
